{"ast":null,"code":"import { isNull as _isNull } from \"lodash\";\nimport { fetchUser } from \"data/redux/action/user\";\nimport { checkAdmin, LOGIN_REDIRECT_URL } from \"data/api\";\n\nconst checkAdminMiddleware = store => next => action => {\n  if (!action.checkAdmin) {\n    return next(action);\n  }\n\n  return checkAdmin().then(r => {\n    if (!_isNull(r) && !_isNull(r.data) && r.data === true) {\n      if (action.success) {\n        action.success();\n      }\n    } else {\n      if (action.before) {\n        action.before();\n      }\n\n      if (action.fail) {\n        action.fail();\n      }\n    }\n  });\n};\n\nexport default checkAdminMiddleware;","map":{"version":3,"sources":["/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/data/redux/middleware/adminCheck.js"],"names":["isNull","_isNull","fetchUser","checkAdmin","LOGIN_REDIRECT_URL","checkAdminMiddleware","store","next","action","then","r","data","success","before","fail"],"mappings":"AAAA,SAAQA,MAAM,IAAIC,OAAlB,QAAgC,QAAhC;AACA,SAAQC,SAAR,QAAwB,wBAAxB;AACA,SAAQC,UAAR,EAAoBC,kBAApB,QAA6C,UAA7C;;AAEA,MAAMC,oBAAoB,GAAGC,KAAK,IAAIC,IAAI,IAAIC,MAAM,IAAI;AACpD,MAAI,CAACA,MAAM,CAACL,UAAZ,EAAwB;AACpB,WAAOI,IAAI,CAACC,MAAD,CAAX;AACH;;AACD,SAAOL,UAAU,GACZM,IADE,CACGC,CAAC,IAAI;AACP,QAAI,CAACT,OAAO,CAACS,CAAD,CAAR,IAAe,CAACT,OAAO,CAACS,CAAC,CAACC,IAAH,CAAvB,IAAmCD,CAAC,CAACC,IAAF,KAAW,IAAlD,EAAwD;AACpD,UAAGH,MAAM,CAACI,OAAV,EAAmB;AACfJ,QAAAA,MAAM,CAACI,OAAP;AACH;AACJ,KAJD,MAIO;AACH,UAAGJ,MAAM,CAACK,MAAV,EAAkB;AACdL,QAAAA,MAAM,CAACK,MAAP;AACH;;AACD,UAAGL,MAAM,CAACM,IAAV,EAAgB;AACZN,QAAAA,MAAM,CAACM,IAAP;AACH;AAEJ;AACJ,GAfE,CAAP;AAgBH,CApBD;;AAsBA,eAAeT,oBAAf","sourcesContent":["import {isNull as _isNull} from \"lodash\";\nimport {fetchUser} from \"data/redux/action/user\";\nimport {checkAdmin, LOGIN_REDIRECT_URL} from \"data/api\";\n\nconst checkAdminMiddleware = store => next => action => {\n    if (!action.checkAdmin) {\n        return next(action)\n    }\n    return checkAdmin()\n        .then(r => {\n            if (!_isNull(r) && !_isNull(r.data) && r.data === true) {\n                if(action.success) {\n                    action.success()\n                }\n            } else {\n                if(action.before) {\n                    action.before()\n                }\n                if(action.fail) {\n                    action.fail()\n                }\n\n            }\n        });\n};\n\nexport default checkAdminMiddleware;"]},"metadata":{},"sourceType":"module"}