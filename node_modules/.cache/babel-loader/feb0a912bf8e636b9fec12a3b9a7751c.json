{"ast":null,"code":"import _slicedToArray from \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/favorite/MobileFavorite.jsx\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { chunk as _chunk, isEmpty as _isEmpty } from 'lodash';\nimport { uuid } from \"bulma-extensions/bulma-calendar/src/js/utils\";\nimport { LoadingFavorite } from \"components/common/layout/PresentUtil\";\nimport { FavoriteContentEmpty, getFavoriteContentWithAdSense } from \"components/favorite/Favorite\";\nimport StoreDetailAnimate from \"components/mobile/store/StoreDetail\";\nimport { savePosition, ScrollContext, scrollTo } from \"components/common/scroll/ScrollManager\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { buildContentPath } from \"data/util\";\n\nconst Loading = () => React.createElement(\"div\", {\n  className: \"tile is-ancestor is-borderless\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  className: \"card tile is-parent is-borderless is-shadowless\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  className: \"tile is-child box is-shadowless\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15\n  },\n  __self: this\n}, React.createElement(LoadingFavorite, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}))));\n\nconst MobileFavorite = () => {\n  const _useSelector = useSelector(state => state.favoriteChannel),\n        favoriteChannelList = _useSelector.favoriteChannelList;\n\n  const _useSelector2 = useSelector(state => state.favoriteContent),\n        favoriteContentList = _useSelector2.favoriteContentList,\n        favoriteContentLoading = _useSelector2.favoriteContentLoading;\n\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        contentDetail = _useState2[0],\n        setContentDetail = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showDetail = _useState4[0],\n        setShowDetail = _useState4[1];\n\n  const _useContext = useContext(ScrollContext),\n        scrollTarget = _useContext.scrollTarget,\n        isWindow = _useContext.isWindow;\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        prevScroll = _useState6[0],\n        setPrevScroll = _useState6[1];\n\n  const history = useHistory();\n  const location = useLocation();\n  useEffect(() => {\n    if (!_isEmpty(location.hash)) {\n      history.replace({\n        pathname: location.pathname\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (_isEmpty(location.hash)) {\n      setContentDetail({});\n      setTimeout(() => {\n        scrollTo(scrollTarget, prevScroll);\n      }, 200);\n    }\n  }, [location]);\n\n  const getFavoriteContents = () => {\n    return getFavoriteContentWithAdSense(favoriteContentList, favoriteChannelList, 5, \"auto\", (channel, content) => {\n      savePosition(scrollTarget, isWindow, setPrevScroll);\n      setContentDetail(content);\n      history.push({\n        pathname: location.pathname,\n        hash: \"#\" + content.id\n      });\n    });\n  };\n\n  const renderFavoriteContents = () => {\n    if (_isEmpty(favoriteContentList)) {\n      return React.createElement(FavoriteContentEmpty, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      });\n    } else {\n      return _chunk(getFavoriteContents(), 1).map(chunkList => React.createElement(\"div\", {\n        key: uuid(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tile is-ancestor is-borderless is-marginless\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, chunkList), React.createElement(\"hr\", {\n        className: \"divider has-background-grey-lighter is-marginless\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })));\n    }\n  };\n\n  const resetContentDetail = () => {\n    history.goBack(1);\n  };\n\n  const callbackShow = () => {\n    setShowDetail(true);\n  };\n\n  const callbackHide = () => {\n    setShowDetail(false);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"column is-fullheight-with-navbar is-paddingless\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(StoreDetailAnimate, {\n    visible: !_isEmpty(contentDetail),\n    contentDetail: contentDetail,\n    onClickBack: resetContentDetail,\n    callbackShow: callbackShow,\n    callbackHide: callbackHide,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), favoriteContentLoading || !_isEmpty(contentDetail) && showDetail ? React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }) : renderFavoriteContents()));\n};\n\nexport default MobileFavorite;","map":{"version":3,"sources":["/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/favorite/MobileFavorite.jsx"],"names":["React","useContext","useEffect","useState","useSelector","chunk","_chunk","isEmpty","_isEmpty","uuid","LoadingFavorite","FavoriteContentEmpty","getFavoriteContentWithAdSense","StoreDetailAnimate","savePosition","ScrollContext","scrollTo","useHistory","useLocation","buildContentPath","Loading","MobileFavorite","state","favoriteChannel","favoriteChannelList","favoriteContent","favoriteContentList","favoriteContentLoading","contentDetail","setContentDetail","showDetail","setShowDetail","scrollTarget","isWindow","prevScroll","setPrevScroll","history","location","hash","replace","pathname","setTimeout","getFavoriteContents","channel","content","push","id","renderFavoriteContents","map","chunkList","resetContentDetail","goBack","callbackShow","callbackHide"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {chunk as _chunk, isEmpty as _isEmpty} from 'lodash';\nimport {uuid} from \"bulma-extensions/bulma-calendar/src/js/utils\";\nimport {LoadingFavorite} from \"components/common/layout/PresentUtil\";\nimport {FavoriteContentEmpty, getFavoriteContentWithAdSense} from \"components/favorite/Favorite\";\nimport StoreDetailAnimate from \"components/mobile/store/StoreDetail\";\nimport {savePosition, ScrollContext, scrollTo} from \"components/common/scroll/ScrollManager\";\nimport {useHistory, useLocation} from \"react-router\";\nimport {buildContentPath} from \"data/util\";\n\nconst Loading = () => (\n    <div className=\"tile is-ancestor is-borderless\">\n        <div className=\"card tile is-parent is-borderless is-shadowless\">\n            <div className=\"tile is-child box is-shadowless\">\n                <LoadingFavorite />\n            </div>\n        </div>\n    </div>\n)\nconst MobileFavorite = () => {\n    const {favoriteChannelList} = useSelector(state => state.favoriteChannel);\n    const {favoriteContentList, favoriteContentLoading} = useSelector(state => state.favoriteContent);\n    const [contentDetail, setContentDetail] = useState({});\n    const [showDetail, setShowDetail] = useState(false);\n    const {scrollTarget, isWindow} = useContext(ScrollContext);\n    const [prevScroll, setPrevScroll] = useState(0);\n    const history = useHistory();\n    const location = useLocation();\n\n    useEffect(() => {\n        if (!_isEmpty(location.hash)) {\n            history.replace({\n                pathname: location.pathname\n            });\n        }\n    }, [])\n\n    useEffect(() => {\n        if (_isEmpty(location.hash)) {\n            setContentDetail({})\n            setTimeout(() => {\n                scrollTo(scrollTarget, prevScroll)\n            }, 200)\n        }\n    }, [location])\n\n    const getFavoriteContents = () => {\n        return getFavoriteContentWithAdSense(\n            favoriteContentList,\n            favoriteChannelList,\n            5,\n            \"auto\",\n            (channel, content) => {\n                savePosition(scrollTarget, isWindow, setPrevScroll);\n                setContentDetail(content);\n                history.push({\n                    pathname: location.pathname,\n                    hash: \"#\" + content.id\n                })\n            });\n    }\n\n    const renderFavoriteContents = () => {\n        if (_isEmpty(favoriteContentList)) {\n            return <FavoriteContentEmpty />\n        } else {\n            return _chunk(getFavoriteContents(), 1).map(chunkList =>\n                <div key={uuid()}>\n                    <div className=\"tile is-ancestor is-borderless is-marginless\">\n                        {chunkList}\n                    </div>\n                    <hr className=\"divider has-background-grey-lighter is-marginless\"/>\n                </div>\n            )\n        }\n    }\n\n    const resetContentDetail = () => {\n        history.goBack(1);\n    }\n    const callbackShow = () => {\n        setShowDetail(true)\n    }\n    const callbackHide = () => {\n        setShowDetail(false)\n    }\n\n    return (\n\n            <div className=\"container\">\n                <div className=\"column is-fullheight-with-navbar is-paddingless\">\n                    <StoreDetailAnimate visible={!_isEmpty(contentDetail)} contentDetail={contentDetail} onClickBack={resetContentDetail} callbackShow={callbackShow} callbackHide={callbackHide}/>\n                    {favoriteContentLoading || (!_isEmpty(contentDetail) && showDetail)\n                        ? <Loading />\n                        : renderFavoriteContents()}\n                </div>\n            </div>\n    )\n};\n\nexport default MobileFavorite;"]},"metadata":{},"sourceType":"module"}