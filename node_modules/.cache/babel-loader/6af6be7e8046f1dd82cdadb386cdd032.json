{"ast":null,"code":"import _slicedToArray from \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/desktop/map/DesktopOverlay.jsx\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleDown, faAngleUp, faExternalLinkAlt, faStar, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport { faStar as fasStar } from '@fortawesome/free-regular-svg-icons';\nimport MarkerArrow from 'assets/images/marker_arrow.png';\nimport { useDispatch } from \"react-redux\";\nimport { fetchUpdateContentLike, showOverlayContent } from \"data/redux/action/content\";\nimport { STORE_LIKED } from \"assets/styles/colors\";\nimport { requireUser } from \"data/redux/action/user\";\n\nconst DesktopOverlay = ({\n  content,\n  visible,\n  originLiked = false\n}) => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        showMore = _useState2[0],\n        setShowMore = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isOverflow = _useState4[0],\n        setIsOverflow = _useState4[1];\n\n  const _useState5 = useState(originLiked),\n        _useState6 = _slicedToArray(_useState5, 2),\n        liked = _useState6[0],\n        setLiked = _useState6[1];\n\n  const dispatch = useDispatch();\n  const store = content.store;\n  const updateOverflow = useCallback(node => {\n    if (node) {\n      let cardContent = node.getElementsByClassName(\"card-content\");\n      setIsOverflow(cardContent[0].clientHeight > 350);\n    }\n  }, []);\n  useEffect(() => {\n    setShowMore(false);\n  }, [visible]);\n\n  const toggleShowMore = () => setShowMore(!showMore);\n\n  const overlayDivClassName = () => showMore ? \"card has-width-350 white-space-normal overflow-hidden has-cursor-default\" : \"card has-width-350 has-height-250 white-space-normal overflow-hidden has-cursor-default\";\n\n  const moreIcon = () => showMore ? faAngleUp : faAngleDown;\n\n  const moreIconClassName = () => !isOverflow ? \"is-hidden\" : showMore ? 'hide-more' : 'show-more';\n\n  const markerArrowClassName = () => showMore ? 'marker-arrow is-hidden' : 'marker-arrow';\n\n  const openUrl = e => {\n    window.open(store.link, \"_blank\");\n  };\n\n  const closeOverlay = () => {\n    dispatch(showOverlayContent(null));\n    setShowMore(false);\n  };\n\n  const updateLike = () => {\n    let origin = liked;\n    let updated = !liked;\n    dispatch(requireUser(user => {\n      setLiked(updated);\n      dispatch(fetchUpdateContentLike(user.email, content.id, updated, () => setLiked(updated), () => setLiked(origin)));\n    }));\n  };\n\n  return React.createElement(\"div\", {\n    ref: updateOverflow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: overlayDivClassName(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    className: \"close-overlay\",\n    icon: faTimes,\n    size: '1x',\n    onClick: closeOverlay,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"card-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"title is-size-5 is-family-sans-serif\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, store.name)), React.createElement(\"hr\", {\n    className: \"has-margin-top-5 has-margin-bottom-5 has-background-black-bis\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"has-text-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: liked ? faStar : fasStar,\n    className: \"has-margin-right-10 clickable\",\n    color: liked ? STORE_LIKED : \"\",\n    size: '1x',\n    onClick: updateLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(FontAwesomeIcon, {\n    className: \"has-margin-right-10 clickable\",\n    icon: faExternalLinkAlt,\n    onClick: openUrl,\n    size: '1x',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"content is-family-sans-serif\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"is-size-6 has-margin-bottom-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, store.address1), React.createElement(\"p\", {\n    className: \"is-size-6 has-margin-bottom-10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"tag is-info is-rounded is-normal has-text-weight-bold has-margin-right-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"\\uC9C0\\uBC88\"), store.address2), React.createElement(\"p\", {\n    className: \"is-size-7 has-margin-bottom-5 has-text-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, store.tel), React.createElement(\"p\", {\n    className: \"is-size-7 has-margin-bottom-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, store.availableTime))), React.createElement(FontAwesomeIcon, {\n    className: moreIconClassName(),\n    icon: moreIcon(),\n    size: '2x',\n    onClick: toggleShowMore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), React.createElement(\"img\", {\n    className: markerArrowClassName(),\n    src: MarkerArrow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }));\n};\n\nexport default DesktopOverlay;","map":{"version":3,"sources":["/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/desktop/map/DesktopOverlay.jsx"],"names":["React","useCallback","useEffect","useState","FontAwesomeIcon","faAngleDown","faAngleUp","faExternalLinkAlt","faStar","faTimes","fasStar","MarkerArrow","useDispatch","fetchUpdateContentLike","showOverlayContent","STORE_LIKED","requireUser","DesktopOverlay","content","visible","originLiked","showMore","setShowMore","isOverflow","setIsOverflow","liked","setLiked","dispatch","store","updateOverflow","node","cardContent","getElementsByClassName","clientHeight","toggleShowMore","overlayDivClassName","moreIcon","moreIconClassName","markerArrowClassName","openUrl","e","window","open","link","closeOverlay","updateLike","origin","updated","user","email","id","name","address1","address2","tel","availableTime"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,WAAf,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAsD,OAAtD;AACA,SAAQC,eAAR,QAA8B,gCAA9B;AACA,SAAQC,WAAR,EAAqBC,SAArB,EAAgCC,iBAAhC,EAAmDC,MAAnD,EAA2DC,OAA3D,QAAyE,mCAAzE;AACA,SAAQD,MAAM,IAAIE,OAAlB,QAAgC,qCAAhC;AACA,OAAOC,WAAP,MAAwB,gCAAxB;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAAQC,sBAAR,EAAgCC,kBAAhC,QAAyD,2BAAzD;AACA,SAAQC,WAAR,QAA0B,sBAA1B;AACA,SAAQC,WAAR,QAA0B,wBAA1B;;AAEA,MAAMC,cAAc,GAAG,CAAC;AAACC,EAAAA,OAAD;AAAUC,EAAAA,OAAV;AAAmBC,EAAAA,WAAW,GAAG;AAAjC,CAAD,KAA6C;AAAA,oBAChCjB,QAAQ,CAAC,KAAD,CADwB;AAAA;AAAA,QACzDkB,QADyD;AAAA,QAC/CC,WAD+C;;AAAA,qBAE5BnB,QAAQ,CAAC,KAAD,CAFoB;AAAA;AAAA,QAEzDoB,UAFyD;AAAA,QAE7CC,aAF6C;;AAAA,qBAGtCrB,QAAQ,CAACiB,WAAD,CAH8B;AAAA;AAAA,QAGzDK,KAHyD;AAAA,QAGlDC,QAHkD;;AAIhE,QAAMC,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAMgB,KAAK,GAAGV,OAAO,CAACU,KAAtB;AAEA,QAAMC,cAAc,GAAG5B,WAAW,CAAC6B,IAAI,IAAI;AACvC,QAAIA,IAAJ,EAAU;AACN,UAAIC,WAAW,GAAGD,IAAI,CAACE,sBAAL,CAA4B,cAA5B,CAAlB;AACAR,MAAAA,aAAa,CAACO,WAAW,CAAC,CAAD,CAAX,CAAeE,YAAf,GAA8B,GAA/B,CAAb;AACH;AACJ,GALiC,EAK/B,EAL+B,CAAlC;AAMA/B,EAAAA,SAAS,CAAC,MAAM;AACZoB,IAAAA,WAAW,CAAC,KAAD,CAAX;AACH,GAFQ,EAEN,CAACH,OAAD,CAFM,CAAT;;AAIA,QAAMe,cAAc,GAAG,MAAMZ,WAAW,CAAC,CAACD,QAAF,CAAxC;;AACA,QAAMc,mBAAmB,GAAG,MAAMd,QAAQ,GACpC,0EADoC,GAEpC,yFAFN;;AAGA,QAAMe,QAAQ,GAAG,MAAMf,QAAQ,GAAEf,SAAF,GAAcD,WAA7C;;AACA,QAAMgC,iBAAiB,GAAG,MAAM,CAACd,UAAD,GAAc,WAAd,GAA4BF,QAAQ,GAAG,WAAH,GAAiB,WAArF;;AACA,QAAMiB,oBAAoB,GAAG,MAAMjB,QAAQ,GAAE,wBAAF,GAA6B,cAAxE;;AACA,QAAMkB,OAAO,GAAIC,CAAD,IAAO;AACnBC,IAAAA,MAAM,CAACC,IAAP,CAAYd,KAAK,CAACe,IAAlB,EAAwB,QAAxB;AACH,GAFD;;AAGA,QAAMC,YAAY,GAAG,MAAM;AACvBjB,IAAAA,QAAQ,CAACb,kBAAkB,CAAC,IAAD,CAAnB,CAAR;AACAQ,IAAAA,WAAW,CAAC,KAAD,CAAX;AACH,GAHD;;AAKA,QAAMuB,UAAU,GAAG,MAAM;AACrB,QAAIC,MAAM,GAAGrB,KAAb;AACA,QAAIsB,OAAO,GAAG,CAACtB,KAAf;AACAE,IAAAA,QAAQ,CAACX,WAAW,CAAEgC,IAAD,IAAU;AAC3BtB,MAAAA,QAAQ,CAACqB,OAAD,CAAR;AACApB,MAAAA,QAAQ,CAACd,sBAAsB,CAACmC,IAAI,CAACC,KAAN,EAAa/B,OAAO,CAACgC,EAArB,EAAyBH,OAAzB,EAAiC,MAAMrB,QAAQ,CAACqB,OAAD,CAA/C,EAAyD,MAAMrB,QAAQ,CAACoB,MAAD,CAAvE,CAAvB,CAAR;AACH,KAHmB,CAAZ,CAAR;AAIH,GAPD;;AAUA,SACI;AAAK,IAAA,GAAG,EAAEjB,cAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAEM,mBAAmB,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,eAAD;AAAiB,IAAA,SAAS,EAAC,eAA3B;AAA2C,IAAA,IAAI,EAAE1B,OAAjD;AAA0D,IAAA,IAAI,EAAE,IAAhE;AAAsE,IAAA,OAAO,EAAEmC,YAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAG;AAAM,IAAA,SAAS,EAAC,sCAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwDhB,KAAK,CAACuB,IAA9D,CAAH,CADJ,EAEI;AAAI,IAAA,SAAS,EAAC,+DAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,eAAD;AACI,IAAA,IAAI,EAAE1B,KAAK,GAAGjB,MAAH,GAAYE,OAD3B;AAEI,IAAA,SAAS,EAAC,+BAFd;AAGI,IAAA,KAAK,EAAEe,KAAK,GAAGV,WAAH,GAAiB,EAHjC;AAII,IAAA,IAAI,EAAE,IAJV;AAKI,IAAA,OAAO,EAAE8B,UALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAOI,oBAAC,eAAD;AAAiB,IAAA,SAAS,EAAC,+BAA3B;AAA2D,IAAA,IAAI,EAAEtC,iBAAjE;AAAoF,IAAA,OAAO,EAAEgC,OAA7F;AAAsG,IAAA,IAAI,EAAE,IAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CAHJ,EAaI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAG,IAAA,SAAS,EAAC,+BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8CX,KAAK,CAACwB,QAApD,CADJ,EAEI;AAAG,IAAA,SAAS,EAAC,gCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8C;AAAM,IAAA,SAAS,EAAC,0EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA9C,EAAmJxB,KAAK,CAACyB,QAAzJ,CAFJ,EAGI;AAAG,IAAA,SAAS,EAAC,6CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4DzB,KAAK,CAAC0B,GAAlE,CAHJ,EAII;AAAG,IAAA,SAAS,EAAC,+BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8C1B,KAAK,CAAC2B,aAApD,CAJJ,CAbJ,CAFJ,EAsBI,oBAAC,eAAD;AAAiB,IAAA,SAAS,EAAElB,iBAAiB,EAA7C;AAAiD,IAAA,IAAI,EAAED,QAAQ,EAA/D;AAAmE,IAAA,IAAI,EAAE,IAAzE;AAA+E,IAAA,OAAO,EAAEF,cAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBJ,CADJ,EAyBI;AAAK,IAAA,SAAS,EAAEI,oBAAoB,EAApC;AAAwC,IAAA,GAAG,EAAE3B,WAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzBJ,CADJ;AA6BH,CAvED;;AAyEA,eAAeM,cAAf","sourcesContent":["import React, {useCallback, useEffect, useState} from 'react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faAngleDown, faAngleUp, faExternalLinkAlt, faStar, faTimes} from \"@fortawesome/free-solid-svg-icons\";\nimport {faStar as fasStar} from '@fortawesome/free-regular-svg-icons';\nimport MarkerArrow from 'assets/images/marker_arrow.png';\nimport {useDispatch} from \"react-redux\";\nimport {fetchUpdateContentLike, showOverlayContent} from \"data/redux/action/content\";\nimport {STORE_LIKED} from \"assets/styles/colors\";\nimport {requireUser} from \"data/redux/action/user\";\n\nconst DesktopOverlay = ({content, visible, originLiked = false}) => {\n    const [showMore, setShowMore] = useState(false);\n    const [isOverflow, setIsOverflow] = useState(false);\n    const [liked, setLiked] = useState(originLiked);\n    const dispatch = useDispatch();\n    const store = content.store\n\n    const updateOverflow = useCallback(node => {\n        if (node) {\n            let cardContent = node.getElementsByClassName(\"card-content\");\n            setIsOverflow(cardContent[0].clientHeight > 350);\n        }\n    }, []);\n    useEffect(() => {\n        setShowMore(false)\n    }, [visible]);\n\n    const toggleShowMore = () => setShowMore(!showMore);\n    const overlayDivClassName = () => showMore\n        ? \"card has-width-350 white-space-normal overflow-hidden has-cursor-default\"\n        : \"card has-width-350 has-height-250 white-space-normal overflow-hidden has-cursor-default\";\n    const moreIcon = () => showMore? faAngleUp : faAngleDown;\n    const moreIconClassName = () => !isOverflow ? \"is-hidden\" : showMore?  'hide-more' : 'show-more';\n    const markerArrowClassName = () => showMore? 'marker-arrow is-hidden' : 'marker-arrow';\n    const openUrl = (e) => {\n        window.open(store.link, \"_blank\");\n    };\n    const closeOverlay = () => {\n        dispatch(showOverlayContent(null));\n        setShowMore(false)\n    };\n\n    const updateLike = () => {\n        let origin = liked;\n        let updated = !liked;\n        dispatch(requireUser((user) => {\n            setLiked(updated);\n            dispatch(fetchUpdateContentLike(user.email, content.id, updated,() => setLiked(updated),() => setLiked(origin)));\n        }));\n    }\n\n\n    return (\n        <div ref={updateOverflow}>\n            <div className={overlayDivClassName()} >\n                <FontAwesomeIcon className=\"close-overlay\" icon={faTimes} size={'1x'} onClick={closeOverlay} />\n                <div className=\"card-content\">\n                    <p><span className=\"title is-size-5 is-family-sans-serif\">{store.name}</span></p>\n                    <hr className=\"has-margin-top-5 has-margin-bottom-5 has-background-black-bis\"/>\n                    <div className=\"has-text-right\">\n                        <FontAwesomeIcon\n                            icon={liked ? faStar : fasStar}\n                            className=\"has-margin-right-10 clickable\"\n                            color={liked ? STORE_LIKED : \"\"}\n                            size={'1x'}\n                            onClick={updateLike} />\n                        <FontAwesomeIcon className=\"has-margin-right-10 clickable\" icon={faExternalLinkAlt} onClick={openUrl} size={'1x'} />\n                    </div>\n\n                    <div className=\"content is-family-sans-serif\">\n                        <p className=\"is-size-6 has-margin-bottom-5\">{store.address1}</p>\n                        <p className=\"is-size-6 has-margin-bottom-10\"><span className=\"tag is-info is-rounded is-normal has-text-weight-bold has-margin-right-5\">지번</span>{store.address2}</p>\n                        <p className=\"is-size-7 has-margin-bottom-5 has-text-link\">{store.tel}</p>\n                        <p className=\"is-size-7 has-margin-bottom-5\">{store.availableTime}</p>\n                    </div>\n                </div>\n                <FontAwesomeIcon className={moreIconClassName()} icon={moreIcon()} size={'2x'} onClick={toggleShowMore}/>\n            </div>\n            <img className={markerArrowClassName()} src={MarkerArrow}/>\n        </div>\n    )\n};\n\nexport default DesktopOverlay"]},"metadata":{},"sourceType":"module"}