{"ast":null,"code":"import _slicedToArray from \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/common/map/CustomOverlay.jsx\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { MapContext } from \"components/common/map/KakaoMap\";\n\nconst CustomOverlay = props => {\n  const _useContext = useContext(MapContext),\n        kakao = _useContext.kakao,\n        map = _useContext.map;\n\n  const _useState = useState({\n    overlay: null,\n    kakao,\n    map\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const overlayRef = useCallback(node => {\n    const _ref = props.options ? props.options : {},\n          clickable = _ref.clickable,\n          offsetY = _ref.offsetY,\n          yAnchor = _ref.yAnchor,\n          xAnchor = _ref.xAnchor;\n\n    const lat = props.lat;\n    const lng = props.lng;\n    if (state.overlay !== null) return;\n    if (node == null) return; // const offsetFromLocation = offsetY ? offsetY : 54 ; // 위도 경도의 위치와 떨어진 정도 pixel, marker image height + custom overlay arrow height\n\n    const overlay = new kakao.maps.CustomOverlay({\n      position: new kakao.maps.LatLng(lat, lng),\n      content: node.firstChild,\n      clickable: clickable ? clickable : true,\n      yAnchor: yAnchor ? yAnchor : offsetY ? 1 + offsetY / node.firstChild.offsetHeight : 0.5,\n      xAnchor: xAnchor ? xAnchor : 0.5\n    });\n\n    if (props.visible) {\n      overlay.setMap(map);\n    }\n\n    setState(Object.assign(state, {\n      overlay\n    }));\n    return () => {\n      overlay.setMap(null);\n    };\n  }, []);\n  useEffect(() => {\n    const overlay = state.overlay;\n    if (overlay === null) return;\n\n    if (props.visible) {\n      overlay.setMap(map);\n    } else {\n      overlay.setMap(null);\n    }\n\n    return () => {\n      overlay.setMap(null);\n    };\n  }, [props.visible]);\n  useEffect(() => {\n    const lat = props.lat,\n          lng = props.lng;\n    const overlay = state.overlay;\n    if (overlay === null) return;\n    overlay.setPosition(new kakao.maps.LatLng(lat, lng));\n    return () => {\n      overlay.setMap(null);\n    };\n  }, [props.lat, props.lng]);\n  return React.createElement(\"div\", {\n    ref: overlayRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default CustomOverlay;","map":{"version":3,"sources":["/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/common/map/CustomOverlay.jsx"],"names":["React","useCallback","useContext","useEffect","useState","MapContext","CustomOverlay","props","kakao","map","overlay","state","setState","overlayRef","node","options","clickable","offsetY","yAnchor","xAnchor","lat","lng","maps","position","LatLng","content","firstChild","offsetHeight","visible","setMap","Object","assign","setPosition","children"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from \"react\";\nimport {MapContext} from \"components/common/map/KakaoMap\";\n\nconst CustomOverlay = props => {\n    const { kakao, map } = useContext(MapContext);\n    const [state, setState] = useState({\n        overlay: null,\n        kakao,\n        map\n    });\n\n    const overlayRef = useCallback(node => {\n        const { clickable, offsetY, yAnchor, xAnchor} = props.options ? props.options : {};\n        const lat = props.lat;\n        const lng = props.lng;\n        if (state.overlay !== null) return;\n        if (node == null) return;\n        // const offsetFromLocation = offsetY ? offsetY : 54 ; // 위도 경도의 위치와 떨어진 정도 pixel, marker image height + custom overlay arrow height\n        const overlay = new kakao.maps.CustomOverlay({\n            position: new kakao.maps.LatLng(lat, lng),\n            content: node.firstChild,\n            clickable: clickable ? clickable : true,\n            yAnchor: yAnchor ? yAnchor : offsetY ? (1 + (offsetY/node.firstChild.offsetHeight)) : 0.5,\n            xAnchor: xAnchor ? xAnchor : 0.5\n        });\n        if (props.visible) {\n            overlay.setMap(map);\n        }\n        setState(Object.assign(state, { overlay }));\n        return () => {\n            overlay.setMap(null)\n        }\n    }, []);\n\n    useEffect(() => {\n        const { overlay } = state;\n        if (overlay === null) return;\n        if (props.visible) {\n            overlay.setMap(map);\n        } else {\n            overlay.setMap(null);\n        }\n        return () => {\n            overlay.setMap(null)\n        }\n    }, [props.visible]);\n\n    useEffect(() => {\n        const { lat, lng } = props;\n        const { overlay } = state;\n        if (overlay === null) return;\n        overlay.setPosition(new kakao.maps.LatLng(lat, lng));\n        return () => {\n            overlay.setMap(null)\n        }\n    }, [props.lat, props.lng]);\n\n\n    return <div ref={overlayRef}>\n            {props.children}\n        </div>\n};\n\nexport default CustomOverlay;\n"]},"metadata":{},"sourceType":"module"}