{"ast":null,"code":"import _slicedToArray from \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/common/map/CustomOverlay.jsx\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { MapContext } from \"components/common/map/KakaoMap\";\n\nconst CustomOverlay = props => {\n  const _useContext = useContext(MapContext),\n        kakao = _useContext.kakao,\n        map = _useContext.map;\n\n  const _useState = useState({\n    overlay: null,\n    kakao,\n    map\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const overlayRef = useCallback(node => {\n    const _ref = props.options ? props.options : {},\n          clickable = _ref.clickable,\n          offsetY = _ref.offsetY,\n          yAnchor = _ref.yAnchor,\n          xAnchor = _ref.xAnchor,\n          zIndex = _ref.zIndex;\n\n    const lat = props.lat;\n    const lng = props.lng;\n    if (state.overlay !== null) return;\n    if (node == null) return; // const offsetFromLocation = offsetY ? offsetY : 54 ; // 위도 경도의 위치와 떨어진 정도 pixel, marker image height + custom overlay arrow height\n\n    const overlay = new kakao.maps.CustomOverlay({\n      position: new kakao.maps.LatLng(lat, lng),\n      content: node.firstChild,\n      clickable: clickable ? clickable : true,\n      yAnchor: yAnchor ? yAnchor : offsetY ? 1 + offsetY / node.firstChild.offsetHeight : 0.5,\n      xAnchor: xAnchor ? xAnchor : 0.5,\n      zIndex: zIndex ? zIndex : 1\n    });\n\n    if (props.visible) {\n      overlay.setMap(map);\n    }\n\n    setState(Object.assign(state, {\n      overlay\n    }));\n    return () => {\n      overlay.setMap(null);\n    };\n  }, []);\n  useEffect(() => {\n    const lat = props.lat,\n          lng = props.lng,\n          visible = props.visible;\n    const overlay = state.overlay;\n    if (overlay === null) return;\n    overlay.setPosition(new kakao.maps.LatLng(lat, lng));\n\n    if (visible) {\n      overlay.setMap(map);\n    } else {\n      overlay.setMap(null);\n    }\n\n    return () => {\n      overlay.setMap(null);\n    };\n  }, [props.lat, props.lng, props.visible]);\n  useEffect(() => {\n    const zIndex = props.options.zIndex;\n    const overlay = state.overlay;\n    if (overlay === null) return;\n\n    if (zIndex) {\n      overlay.setZIndex(zIndex);\n    }\n  }, [props.options.zIndex]);\n  return React.createElement(\"div\", {\n    ref: overlayRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default CustomOverlay;","map":{"version":3,"sources":["/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/common/map/CustomOverlay.jsx"],"names":["React","useCallback","useContext","useEffect","useState","MapContext","CustomOverlay","props","kakao","map","overlay","state","setState","overlayRef","node","options","clickable","offsetY","yAnchor","xAnchor","zIndex","lat","lng","maps","position","LatLng","content","firstChild","offsetHeight","visible","setMap","Object","assign","setPosition","setZIndex","children"],"mappings":"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","sourcesContent":["import React, {useCallback, useContext, useEffect, useState} from \"react\";\nimport {MapContext} from \"components/common/map/KakaoMap\";\n\nconst CustomOverlay = props => {\n    const { kakao, map } = useContext(MapContext);\n    const [state, setState] = useState({\n        overlay: null,\n        kakao,\n        map\n    });\n\n    const overlayRef = useCallback(node => {\n        const { clickable, offsetY, yAnchor, xAnchor, zIndex} = props.options ? props.options : {};\n        const lat = props.lat;\n        const lng = props.lng;\n        if (state.overlay !== null) return;\n        if (node == null) return;\n        // const offsetFromLocation = offsetY ? offsetY : 54 ; // 위도 경도의 위치와 떨어진 정도 pixel, marker image height + custom overlay arrow height\n        const overlay = new kakao.maps.CustomOverlay({\n            position: new kakao.maps.LatLng(lat, lng),\n            content: node.firstChild,\n            clickable: clickable ? clickable : true,\n            yAnchor: yAnchor ? yAnchor : offsetY ? (1 + (offsetY/node.firstChild.offsetHeight)) : 0.5,\n            xAnchor: xAnchor ? xAnchor : 0.5,\n            zIndex: zIndex ? zIndex : 1,\n        });\n        if (props.visible) {\n            overlay.setMap(map);\n        }\n        setState(Object.assign(state, { overlay }));\n        return () => {\n            overlay.setMap(null)\n        }\n    }, []);\n\n    useEffect(() => {\n        const { lat, lng, visible } = props;\n        const { overlay } = state;\n        if (overlay === null) return;\n        overlay.setPosition(new kakao.maps.LatLng(lat, lng));\n        if (visible) {\n            overlay.setMap(map);\n        } else {\n            overlay.setMap(null);\n        }\n        return () => {\n            overlay.setMap(null)\n        }\n    }, [props.lat, props.lng, props.visible]);\n\n    useEffect(() => {\n        const { zIndex } = props.options\n        const { overlay } = state;\n        if (overlay === null) return;\n        if (zIndex) {\n            overlay.setZIndex(zIndex)\n        }\n    }, [props.options.zIndex])\n\n\n    return <div ref={overlayRef}>\n            {props.children}\n        </div>\n};\n\nexport default CustomOverlay;\n"]},"metadata":{},"sourceType":"module"}