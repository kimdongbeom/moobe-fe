{"ast":null,"code":"import _slicedToArray from \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/mobile/store/StoreDetail.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronLeft, faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport { faStar as fasStar } from \"@fortawesome/free-regular-svg-icons\";\nimport YouTube from \"react-youtube\";\nimport CommentList from \"components/common/comment/CommentList\";\nimport withKakaoMap from \"components/common/map/WithKakaoMap\";\nimport StaticKakaoMap from \"components/common/map/StaticKakaoMap\";\nimport { buildContentPath, nullFunction } from \"data/util\";\nimport { STORE_LIKED } from \"assets/styles/colors\";\nimport { requireUser } from \"data/redux/action/user\";\nimport { fetchUpdateContentLike, updateContentUpdated } from \"data/redux/action/content\";\nimport { isEmpty as _isEmpty } from 'lodash';\nimport { resetContentDetailData } from \"data/redux/action/contentDetail\";\nimport { LoadingStore } from \"components/common/layout/PresentUtil\";\nimport withJs from \"components/common/map/WithJs\";\nimport { animated, useSpring } from \"react-spring\";\nimport { getWindowDimensions } from \"components/common/layout/WindowDimensions\";\nimport { useHistory } from \"react-router\";\nimport YoutubeMetric from \"components/common/youtube/Metric\";\nimport { setFocusedLocation } from \"data/redux/action/location\";\nimport MapLocation from \"data/redux/model/MapLocation\";\nimport NaverIco from 'assets/images/naver.png';\nimport NaverMap from 'assets/images/naver_map.png';\nimport KakaoMap from 'assets/images/kakao_map.png';\n\nconst Loading = () => React.createElement(\"div\", {\n  className: \"row\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 30\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  className: \"column overlay-navbar-mobile has-text-centered\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 31\n  },\n  __self: this\n}, React.createElement(FontAwesomeIcon, {\n  className: \"is-pulled-left\",\n  icon: faChevronLeft,\n  size: '2x',\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 32\n  },\n  __self: this\n})), React.createElement(\"div\", {\n  className: \"column overlay-content-mobile is-fullheight-with-navbar-mobile is-marginless is-paddingless is-full has-background-white\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 34\n  },\n  __self: this\n}, React.createElement(LoadingStore, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35\n  },\n  __self: this\n})));\n\nconst StaticKakao = withJs(`//dapi.kakao.com/v2/maps/sdk.js?appkey=${process.env.REACT_APP_KAKAO_API_KEY}&libraries=services,clusterer,drawing&autoload=false`)(withKakaoMap(StaticKakaoMap));\n\nconst StoreDetailAnimate = ({\n  visible,\n  contentDetail,\n  onClickBack,\n  callbackShow = nullFunction,\n  callbackHide = nullFunction\n}) => {\n  const _getWindowDimensions = getWindowDimensions(),\n        width = _getWindowDimensions.width,\n        height = _getWindowDimensions.height; //need reaction on inner height\n\n\n  const _useSpring = useSpring({\n    marginLeft: visible ? 0 : width,\n    duration: 150\n  }),\n        marginLeft = _useSpring.marginLeft;\n\n  const callback = m => {\n    if (m == 0) {\n      //margin 0\n      if (callbackShow) callbackShow();\n    } else if (m == width) {\n      //margin width.\n      if (callbackShow) callbackHide();\n    }\n\n    return true;\n  };\n\n  useEffect(() => {}, [visible]);\n  return React.createElement(animated.div, {\n    style: {\n      marginLeft: marginLeft,\n      display: marginLeft.interpolate(m => m >= width ? 'none' : 'unset'),\n      callback: marginLeft.interpolate(callback)\n    },\n    className: \"hero is-fullheight-overlay-mobile is-full has-background-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, !_isEmpty(contentDetail) ? React.createElement(StoreDetail, {\n    contentDetail: contentDetail,\n    onClickBack: onClickBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }) : React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }));\n};\n\nconst StoreDetail = ({\n  contentDetail,\n  onClickBack,\n  isOverlayed\n}) => {\n  const _useState = useState({\n    isSticky: false,\n    calculatedHeight: 0\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        stickyInfo = _useState2[0],\n        setStickyInfo = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isVisible = _useState4[0],\n        setIsVisible = _useState4[1];\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setIsVisible(true);\n    return () => {\n      dispatch(resetContentDetailData());\n      setIsVisible(false);\n    };\n  }, []);\n  return React.createElement(React.Fragment, null, !contentDetail || !isVisible ? React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }) : React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(StoreDetailTitle, {\n    contentDetail: contentDetail,\n    onClickBack: onClickBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"column overlay-content-mobile is-fullheight-with-navbar-mobile is-marginless is-paddingless is-full has-background-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(StoreDetailContent, {\n    contentDetail: contentDetail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"hr\", {\n    className: \"divider has-background-grey-lighter is-top-marginless\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"has-background-white has-padding-right-10 has-padding-left-10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(YouTube, {\n    videoId: contentDetail.videoLinkId // defaults -> null\n    ,\n    id: contentDetail.videoLinkId // defaults -> null\n    ,\n    className: \"youtube-container-mobile\" // defaults -> null\n    ,\n    containerClassName: \"column has-text-centered is-full is-marginless is-paddingless is-top-borderless\" // defaults -> ''\n    ,\n    opts: {\n      playerVars: {\n        playsinline: 1\n      }\n    } // onReady={func}                    // defaults -> noop\n    // onPlay={func}                     // defaults -> noop\n    // onPause={func}                    // defaults -> noop\n    // onEnd={func}                      // defaults -> noop\n    // onError={func}                    // defaults -> noop\n    // onStateChange={func}              // defaults -> noop\n    // onPlaybackRateChange={func}       // defaults -> noop\n    // onPlaybackQualityChange={func}    // defaults -> noop\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(YoutubeMetric, {\n    content: contentDetail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), React.createElement(\"hr\", {\n    className: \"divider has-background-grey-lighter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(CommentList, {\n    content: contentDetail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }))));\n};\n\nconst StoreDetailTitle = ({\n  contentDetail,\n  onClickBack\n}) => {\n  return React.createElement(\"div\", {\n    className: \"column is-fixed-top overlay-navbar-mobile text-overflow-ellipsis has-text-centered\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    className: \"is-pulled-left has-margin-right-15\",\n    icon: faChevronLeft,\n    size: '2x',\n    onClick: onClickBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }));\n};\n\nconst StoreDetailContent = ({\n  contentDetail\n}) => {\n  const _useState5 = useState(contentDetail.liked),\n        _useState6 = _slicedToArray(_useState5, 2),\n        liked = _useState6[0],\n        setLiked = _useState6[1];\n\n  const store = !_isEmpty(contentDetail) ? contentDetail.store : {};\n\n  const _useSelector = useSelector(state => state.channel),\n        activeChannel = _useSelector.activeChannel;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const updateLike = () => {\n    let origin = liked;\n    let updated = !liked;\n    dispatch(requireUser(user => {\n      setLiked(updated);\n      dispatch(fetchUpdateContentLike(user.email, contentDetail.id, updated, () => {\n        dispatch(updateContentUpdated(contentDetail, {\n          liked: updated\n        }));\n        dispatch(setFocusedLocation(new MapLocation(contentDetail)));\n      }, () => setLiked(origin)));\n    }));\n  };\n\n  useEffect(() => {\n    setLiked(contentDetail ? contentDetail.liked : false);\n  }, [contentDetail]);\n\n  const onClickKakaoMap = e => {\n    history.push({\n      pathname: buildContentPath(activeChannel, null),\n      search: location.search\n    });\n    dispatch(setFocusedLocation(new MapLocation(contentDetail)));\n    e.stopPropagation();\n  };\n\n  const openUrl = e => {\n    if (!confirm(\"네이버에서 검색하시겠습니까?\")) return;\n    window.open(store.link, \"_blank\");\n  };\n\n  const openNaverMap = e => {\n    window.location.href = `nmap://place?name=${store.name}&lat=${store.latitude}&lng=${store.longitude}&appname=moobe.co.kr`;\n  };\n\n  const openKakaoMap = e => {\n    window.location.href = `kakaomap://look?p=${store.latitude},${store.longitude}`;\n  };\n\n  return React.createElement(\"div\", {\n    className: \"column is-paddingless is-full\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-content is-top-paddingless\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"is-marginless has-text-left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"title is-size-5 is-family-sans-serif\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, store.name)), React.createElement(\"hr\", {\n    className: \"is-marginless has-margin-bottom-5 has-background-grey-lighter\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"has-text-right has-margin-bottom-15\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(FontAwesomeIcon, {\n    icon: liked ? faStar : fasStar,\n    className: \"has-margin-right-5 clickable\",\n    color: liked ? STORE_LIKED : \"\",\n    size: 'lg',\n    onClick: updateLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    src: NaverMap,\n    className: \"image is-inline is-24x24 box is-paddingless vertical-align-top has-margin-right-5 clickable\",\n    onClick: openNaverMap,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }), React.createElement(\"img\", {\n    src: KakaoMap,\n    className: \"image is-inline is-24x24 box is-paddingless vertical-align-top has-margin-right-5 clickable\",\n    onClick: openKakaoMap,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }), store.link ? React.createElement(\"img\", {\n    src: NaverIco,\n    className: \"image is-inline is-24x24 box is-paddingless vertical-align-top has-margin-right-5 clickable\",\n    onClick: openUrl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }) : null), React.createElement(StaticKakao, {\n    className: \"box is-paddingless is-full has-height-150\",\n    onClick: onClickKakaoMap,\n    options: {\n      lat: store.latitude,\n      lng: store.longitude,\n      level: 4,\n      markerOptions: {\n        lat: store.latitude,\n        lng: store.longitude,\n        text: \"가게위치\"\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"content is-family-sans-serif\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"is-size-6 has-margin-bottom-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, store.address1), React.createElement(\"p\", {\n    className: \"is-size-6 has-margin-bottom-10\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"tag is-info is-rounded is-normal has-text-weight-bold has-margin-right-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, \"\\uC9C0\\uBC88\"), store.address2), React.createElement(\"p\", {\n    className: \"is-size-7 has-margin-bottom-5 has-text-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, store.tel), React.createElement(\"p\", {\n    className: \"is-size-7 has-margin-bottom-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, store.availableTime))));\n};\n\nexport default StoreDetailAnimate;","map":{"version":3,"sources":["/Users/nhnent/IdeaProjects/moobe/src/main/webapps/moobe-fe/src/components/mobile/store/StoreDetail.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","FontAwesomeIcon","faChevronLeft","faStar","fasStar","YouTube","CommentList","withKakaoMap","StaticKakaoMap","buildContentPath","nullFunction","STORE_LIKED","requireUser","fetchUpdateContentLike","updateContentUpdated","isEmpty","_isEmpty","resetContentDetailData","LoadingStore","withJs","animated","useSpring","getWindowDimensions","useHistory","YoutubeMetric","setFocusedLocation","MapLocation","NaverIco","NaverMap","KakaoMap","Loading","StaticKakao","process","env","REACT_APP_KAKAO_API_KEY","StoreDetailAnimate","visible","contentDetail","onClickBack","callbackShow","callbackHide","width","height","marginLeft","duration","callback","m","display","interpolate","StoreDetail","isOverlayed","isSticky","calculatedHeight","stickyInfo","setStickyInfo","isVisible","setIsVisible","dispatch","videoLinkId","playerVars","playsinline","StoreDetailTitle","StoreDetailContent","liked","setLiked","store","state","channel","activeChannel","history","updateLike","origin","updated","user","email","id","onClickKakaoMap","e","push","pathname","search","location","stopPropagation","openUrl","confirm","window","open","link","openNaverMap","href","name","latitude","longitude","openKakaoMap","lat","lng","level","markerOptions","text","address1","address2","tel","availableTime"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faChevronLeft, faStar} from \"@fortawesome/free-solid-svg-icons\";\nimport {faStar as fasStar} from \"@fortawesome/free-regular-svg-icons\";\nimport YouTube from \"react-youtube\";\nimport CommentList from \"components/common/comment/CommentList\";\nimport withKakaoMap from \"components/common/map/WithKakaoMap\";\nimport StaticKakaoMap from \"components/common/map/StaticKakaoMap\";\nimport {buildContentPath, nullFunction} from \"data/util\";\nimport {STORE_LIKED} from \"assets/styles/colors\";\nimport {requireUser} from \"data/redux/action/user\";\nimport {fetchUpdateContentLike, updateContentUpdated} from \"data/redux/action/content\";\nimport {isEmpty as _isEmpty} from 'lodash'\nimport {resetContentDetailData} from \"data/redux/action/contentDetail\";\nimport {LoadingStore} from \"components/common/layout/PresentUtil\";\nimport withJs from \"components/common/map/WithJs\";\nimport {animated, useSpring} from \"react-spring\";\nimport {getWindowDimensions} from \"components/common/layout/WindowDimensions\";\nimport {useHistory} from \"react-router\";\nimport YoutubeMetric from \"components/common/youtube/Metric\";\nimport {setFocusedLocation} from \"data/redux/action/location\";\nimport MapLocation from \"data/redux/model/MapLocation\";\nimport NaverIco from 'assets/images/naver.png';\nimport NaverMap from 'assets/images/naver_map.png';\nimport KakaoMap from 'assets/images/kakao_map.png';\n\n\nconst Loading = () => (\n    <div className=\"row\">\n        <div className=\"column overlay-navbar-mobile has-text-centered\">\n            <FontAwesomeIcon className=\"is-pulled-left\" icon={faChevronLeft} size={'2x'}/>\n        </div>\n        <div className=\"column overlay-content-mobile is-fullheight-with-navbar-mobile is-marginless is-paddingless is-full has-background-white\">\n            <LoadingStore />\n        </div>\n    </div>\n);\n\nconst StaticKakao = withJs(\n    `//dapi.kakao.com/v2/maps/sdk.js?appkey=${\n        process.env.REACT_APP_KAKAO_API_KEY\n    }&libraries=services,clusterer,drawing&autoload=false`\n)(withKakaoMap(StaticKakaoMap));\n\nconst StoreDetailAnimate = ({visible, contentDetail, onClickBack, callbackShow = nullFunction, callbackHide = nullFunction}) => {\n    const {width, height} = getWindowDimensions(); //need reaction on inner height\n    const {marginLeft} = useSpring({marginLeft: visible ? 0 : width, duration: 150});\n    const callback = (m) => {\n        if (m == 0) { //margin 0\n            if (callbackShow) callbackShow()\n        } else if (m == width) { //margin width.\n            if (callbackShow) callbackHide()\n        }\n        return true;\n    }\n    useEffect(() => {\n    }, [visible])\n    return (\n        <animated.div style={{\n            marginLeft: marginLeft,\n            display: marginLeft.interpolate(m => m >= width ? 'none': 'unset'),\n            callback: marginLeft.interpolate(callback)\n        }} className=\"hero is-fullheight-overlay-mobile is-full has-background-white\">\n            {!_isEmpty(contentDetail) ? <StoreDetail contentDetail={contentDetail} onClickBack={onClickBack} /> : <Loading />}\n        </animated.div>\n    )\n}\nconst StoreDetail = ({contentDetail, onClickBack, isOverlayed}) => {\n    const [stickyInfo, setStickyInfo] = useState({\n        isSticky: false,\n        calculatedHeight: 0\n    });\n    const [isVisible, setIsVisible] = useState(false);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setIsVisible(true);\n        return () => {\n            dispatch(resetContentDetailData());\n            setIsVisible(false);\n        }\n    }, [])\n\n    return (\n        <>\n        {!contentDetail || !isVisible\n            ? <Loading />\n            : <div className=\"row\">\n                <StoreDetailTitle contentDetail={contentDetail} onClickBack={onClickBack} />\n                <div className=\"column overlay-content-mobile is-fullheight-with-navbar-mobile is-marginless is-paddingless is-full has-background-white\">\n                    <StoreDetailContent contentDetail={contentDetail} />\n                    <hr className=\"divider has-background-grey-lighter is-top-marginless\"/>\n                    <div className=\"has-background-white has-padding-right-10 has-padding-left-10\">\n                        <YouTube\n                            videoId={contentDetail.videoLinkId}                  // defaults -> null\n                            id={contentDetail.videoLinkId}                       // defaults -> null\n                            className=\"youtube-container-mobile\"                // defaults -> null\n                            containerClassName=\"column has-text-centered is-full is-marginless is-paddingless is-top-borderless\"       // defaults -> ''\n                            opts={{playerVars: {playsinline: 1}}}\n                            // onReady={func}                    // defaults -> noop\n                            // onPlay={func}                     // defaults -> noop\n                            // onPause={func}                    // defaults -> noop\n                            // onEnd={func}                      // defaults -> noop\n                            // onError={func}                    // defaults -> noop\n                            // onStateChange={func}              // defaults -> noop\n                            // onPlaybackRateChange={func}       // defaults -> noop\n                            // onPlaybackQualityChange={func}    // defaults -> noop\n                        />\n                    </div>\n                    <YoutubeMetric content={contentDetail} />\n                    <hr className=\"divider has-background-grey-lighter\"/>\n                    <CommentList content={contentDetail} />\n                </div>\n            </div>\n        }\n        </>\n    )\n};\n\nconst StoreDetailTitle = ({contentDetail, onClickBack}) => {\n    return (\n        <div className={\"column is-fixed-top overlay-navbar-mobile text-overflow-ellipsis has-text-centered\"}>\n            <FontAwesomeIcon className=\"is-pulled-left has-margin-right-15\" icon={faChevronLeft} size={'2x'}\n                             onClick={onClickBack}/>\n            {/*<span><strong>{contentDetail.title}</strong></span>*/}\n        </div>\n    );\n}\n\nconst StoreDetailContent = ({contentDetail}) => {\n    const [liked, setLiked] = useState(contentDetail.liked);\n    const store = !_isEmpty(contentDetail) ? contentDetail.store : {};\n    const {activeChannel} = useSelector(state => state.channel);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const updateLike = () => {\n        let origin = liked;\n        let updated = !liked;\n        dispatch(requireUser((user) => {\n            setLiked(updated);\n            dispatch(fetchUpdateContentLike(user.email, contentDetail.id, updated,() => {\n                dispatch(updateContentUpdated(contentDetail, {liked: updated}));\n                dispatch(setFocusedLocation(new MapLocation(contentDetail)))\n            },() => setLiked(origin)));\n        }));\n    }\n    useEffect(() => {\n        setLiked(contentDetail ? contentDetail.liked : false)\n    }, [contentDetail])\n\n    const onClickKakaoMap = (e) => {\n        history.push({\n            pathname: buildContentPath(activeChannel, null),\n            search: location.search\n        });\n        dispatch(setFocusedLocation(new MapLocation(contentDetail)))\n        e.stopPropagation();\n    }\n    const openUrl = (e) => {\n        if (!confirm(\"네이버에서 검색하시겠습니까?\")) return;\n        window.open(store.link, \"_blank\");\n    };\n    const openNaverMap = (e) => {\n        window.location.href =`nmap://place?name=${store.name}&lat=${store.latitude}&lng=${store.longitude}&appname=moobe.co.kr`\n    }\n    const openKakaoMap = (e) => {\n        window.location.href =`kakaomap://look?p=${store.latitude},${store.longitude}`\n    }\n    return (\n        <div className=\"column is-paddingless is-full\">\n            <div className=\"card-content is-top-paddingless\">\n                <p className=\"is-marginless has-text-left\">\n                    <span className=\"title is-size-5 is-family-sans-serif\">\n                        {store.name}\n                    </span>\n                </p>\n                <hr className=\"is-marginless has-margin-bottom-5 has-background-grey-lighter\"/>\n                <div className=\"has-text-right has-margin-bottom-15\">\n                    <FontAwesomeIcon\n                        icon={liked ? faStar : fasStar}\n                        className=\"has-margin-right-5 clickable\"\n                        color={liked ? STORE_LIKED : \"\"}\n                        size={'lg'}\n                        onClick={updateLike}/>\n                    <img src={NaverMap} className=\"image is-inline is-24x24 box is-paddingless vertical-align-top has-margin-right-5 clickable\" onClick={openNaverMap}/>\n                    <img src={KakaoMap} className=\"image is-inline is-24x24 box is-paddingless vertical-align-top has-margin-right-5 clickable\" onClick={openKakaoMap}/>\n                    {store.link ? <img src={NaverIco} className=\"image is-inline is-24x24 box is-paddingless vertical-align-top has-margin-right-5 clickable\" onClick={openUrl}/> : null}\n                </div>\n                <StaticKakao className=\"box is-paddingless is-full has-height-150\"\n                             onClick={onClickKakaoMap}\n                             options={{\n                                 lat: store.latitude,\n                                 lng: store.longitude,\n                                 level: 4,\n                                 markerOptions: {lat: store.latitude, lng: store.longitude, text: \"가게위치\"}\n                             }}/>\n                <div className=\"content is-family-sans-serif\">\n                    <p className=\"is-size-6 has-margin-bottom-5\">{store.address1}</p>\n                    <p className=\"is-size-6 has-margin-bottom-10\"><span\n                        className=\"tag is-info is-rounded is-normal has-text-weight-bold has-margin-right-5\">지번</span>{store.address2}\n                    </p>\n                    <p className=\"is-size-7 has-margin-bottom-5 has-text-link\">{store.tel}</p>\n                    <p className=\"is-size-7 has-margin-bottom-5\">{store.availableTime}</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default StoreDetailAnimate;"]},"metadata":{},"sourceType":"module"}